# 抖音视频批量上传工具

一个功能强大的抖音视频批量上传自动化工具，支持Web界面和GUI界面。

## 🚀 快速开始

1. 安装依赖：`pip install -r requirements.txt`
2. 运行Web版：`python app.py`
3. 运行GUI版：`python gui.py`

## 📚 详细文档

完整的使用说明和功能介绍请查看 [docs/](./docs/) 文件夹：

- [📖 完整文档索引](./docs/index.md)
- [🗄️ 数据库说明](./docs/database.md)
- [📋 安装指南](./INSTALLATION_GUIDE.md)
- [🌐 代理配置指南](./PROXY_COOKIE_GUIDE.md)
- [🔒 浏览器指纹指南](./FINGERPRINT_GUIDE.md)

## ⚡ 主要功能

- 🎬 批量视频上传
- 🌐 Web界面 + 桌面GUI双界面
- 🍪 Cookie管理和自动更新
- 🔄 代理服务器支持
- 🎭 浏览器指纹伪装
- 📊 实时上传状态监控
- 📅 定时发布功能
- 📈 上传历史记录

## 🛠️ 技术栈

- **后端**: Flask + SocketIO + Playwright
- **前端**: HTML/CSS/JavaScript + WebSocket
- **数据库**: SQLite
- **自动化**: 浏览器自动化 + 反检测技术

## ✨ 新增功能：抖音内容采集

### 🎯 主要功能

#### 📥 内容采集模块
- **视频搜索**: 根据关键词搜索抖音视频内容
- **视频详情**: 获取指定视频的详细信息
- **用户作品**: 批量获取用户发布/喜欢/收藏的作品
- **热榜数据**: 获取抖音实时热榜内容
- **链接解析**: 解析抖音分享链接，提取视频ID

#### 🔧 技术特性
- **异步处理**: 基于 asyncio 的高效并发采集
- **参数加密**: 内置 X-Bogus 等加密算法，绕过平台限制
- **Cookie管理**: 支持使用已有Cookie进行认证访问
- **代理支持**: 支持HTTP/SOCKS代理，避免IP限制
- **数据导出**: 支持JSON格式导出采集结果

#### 🎨 用户界面
- **选项卡设计**: 清晰的功能分类和操作界面
- **实时状态**: 采集进度和状态实时显示
- **结果展示**: 表格形式展示采集结果，支持筛选和操作
- **响应式布局**: 适配不同屏幕尺寸

### 📋 使用方法

#### 1. 环境准备
```bash
# 安装新增依赖
pip install -r requirements.txt

# 确保Downloader模块可用
ls Downloader/  # 检查Downloader目录是否存在
```

#### 2. 基本使用

##### 视频搜索
1. 选择"视频搜索"选项卡
2. 输入搜索关键词（如："美食教程"）
3. 设置搜索页数（1-20页）
4. 可选择Cookie和代理
5. 点击"开始搜索"

##### 获取视频详情
1. 选择"视频详情"选项卡
2. 输入抖音视频ID（如：7123456789）
3. 可选择Cookie和代理  
4. 点击"获取详情"

##### 获取用户作品
1. 选择"用户作品"选项卡
2. 输入用户sec_user_id
3. 选择作品类型（发布/喜欢/收藏）
4. 设置获取页数
5. 点击"获取作品"

##### 链接解析
1. 选择"链接解析"选项卡
2. 粘贴包含抖音分享链接的文本
3. 点击"解析链接"

#### 3. 高级功能

##### Cookie配置
- 在Cookie管理中生成或导入Cookie
- 采集时选择对应的Cookie文件
- Cookie可提高采集成功率和获取更多数据

##### 代理配置  
- 在代理管理中添加HTTP/SOCKS代理
- 采集时选择合适的代理服务器
- 有助于避免IP限制和提高稳定性

##### 结果操作
- **查看详情**: 点击眼睛图标查看视频详细信息
- **单个下载**: 点击下载图标下载单个视频（开发中）
- **批量选择**: 勾选多个结果进行批量操作
- **数据导出**: 导出JSON格式的采集数据
- **清空结果**: 清理当前采集结果

### 🔧 API 接口

新增的后端API接口：

```bash
# 视频搜索
POST /api/douyin/search/video
{
  "keyword": "搜索关键词",
  "pages": 5,
  "cookie": "可选Cookie",
  "proxy": "可选代理"
}

# 获取视频详情
POST /api/douyin/detail  
{
  "detail_id": "视频ID",
  "cookie": "可选Cookie",
  "proxy": "可选代理"
}

# 获取用户作品
POST /api/douyin/account
{
  "sec_user_id": "用户ID", 
  "tab": "post|like|collection",
  "pages": 5,
  "cookie": "可选Cookie",
  "proxy": "可选代理"
}

# 获取热榜数据
GET /api/douyin/hot?cookie=xxx&proxy=xxx

# 解析分享链接
POST /api/douyin/link_parse
{
  "text": "包含分享链接的文本",
  "proxy": "可选代理"
}
```

### ⚠️ 注意事项

1. **合规使用**: 请遵守抖音平台的使用条款，合理使用采集功能
2. **频率控制**: 避免过于频繁的请求，建议设置适当的间隔
3. **Cookie有效性**: 定期检查和更新Cookie以确保采集成功率
4. **代理稳定性**: 使用稳定的代理服务以提高采集成功率
5. **数据处理**: 采集的数据仅供学习和研究使用

### 🐛 故障排除

#### 常见问题

**采集失败**: 
- 检查网络连接
- 验证Cookie有效性  
- 尝试更换代理服务器

**解析错误**:
- 确认输入的ID或链接格式正确
- 检查目标内容是否还存在
- 尝试使用有效的Cookie

**模块导入失败**:
- 确保Downloader目录存在且完整
- 检查Python依赖包是否正确安装
- 查看控制台错误信息

#### 日志查看
```bash
# 查看应用日志
tail -f logs/douyin_up.log

# 查看采集相关日志
grep "downloader" logs/douyin_up.log
```

### 🔄 更新日志

**v2.1.0** (最新)
- ✅ 新增抖音内容采集模块
- ✅ 集成TikTokDownloader项目核心功能
- ✅ 支持视频搜索、详情获取、用户作品采集
- ✅ 新增热榜数据和链接解析功能
- ✅ 优化用户界面，新增采集结果展示
- ✅ 支持数据导出和批量操作

---

> 💡 **提示**: 首次使用请先查看安装指南和配置说明！ 